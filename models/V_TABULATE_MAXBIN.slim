/*
	This exercises Eidos function tabulate(integer bin)
	It benchmarks specifically the maxbin tabulation stage
*/

initialize() { }
1 early() {
	values = rdunif(10000000, min=0, max=10000);
	o = tabulate(values);
	
	_startBenchmark("TABULATE_MAXBIN");
	
	start = clock("mono");
	for (i in 1:3000)
		y = tabulate(values);
	
	// test only the last one, to avoid overhead
	if (identical(o, y))
		catn("### CORRECT ###");
	else
		catn("### *** INCORRECT *** ###");
}
